<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EMEP EEA Emission factors data-base • emep</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="EMEP EEA Emission factors data-base">
<meta property="og:description" content="Access to the EMEP/EEA emission factors Tier 2 data.base.
    This data-base includes all the emission factors which includes all 
    considered sources. I will include methods to process emissions soon.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">emep</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<hr>
<div id="output-github_document" class="section level2">
<h2 class="hasAnchor">
<a href="#output-github_document" class="anchor"></a>output: github_document</h2>
<!-- README.md is generated from README.Rmd. Please edit that file -->
<!-- date: "11 de Mayo de 2020" -->
<p><code>{r, echo = FALSE} knitr::opts_chunk$set(   collapse = TRUE,   comment = "#&gt;",   fig.path = "man/figures/" )</code></p>
</div>
<div id="emep-eea-emission-factors-data-base" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#emep-eea-emission-factors-data-base" class="anchor"></a>EMEP EEA Emission factors data-base</h1></div>
<p>Access to the EMEP EEA emission factors tier 2. <a href="https://www.eea.europa.eu/publications/emep-eea-guidebook-2019" class="uri">https://www.eea.europa.eu/publications/emep-eea-guidebook-2019</a></p>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(remotes) </a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_gitlab.html">install_gitlab</a></span>(<span class="st">"ibarraespinosa/emep"</span>)</a></code></pre></div>
</div>
<div id="functions" class="section level2">
<h2 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h2>
<ul>
<li>Added Fortran function to speedup calculations (currently, without speed)</li>
<li>Improved <a href="https://atmoschem.github.io/vein/reference/ef_cetesb.html">ef_cetesb</a>. future steps:</li>
<li>Enhance <a href="https://atmoschem.github.io/vein/reference/inventory.html">inventory</a>. The idea is to configurate a whole emissions inventory for emission factors of CETESB, COPERT.</li>
<li>Improve plots.</li>
<li>Adds or connect traffic from gtfs services.</li>
<li>Add HBEFA EF.</li>
<li>Estimation of evaporative emissions with Copert Tier 3.</li>
<li>Group species by chemical mechanism.</li>
</ul>
</div>
<div id="how-does-it-work" class="section level2">
<h2 class="hasAnchor">
<a href="#how-does-it-work" class="anchor"></a>How does it work?</h2>
<p>VEIN consist of: "Elaboration of vehicular emissions inventories, consisting in four stages:</p>
<ol>
<li>pre-processing activity data,</li>
<li>preparing emissions factors,</li>
<li>estimating the emissions and</li>
<li>post-processing of emissions in maps and databases."</li>
</ol>
<p>This implies the use of several functions in a coordinates ans structured way, therefore it is added the new function <strong>inventory</strong> which creates a structured set of directories and scripts to run VEIN. Please, open the file ‘main.R’ and run each line to understand VEIN. <strong>Remember, if you have doubts with any function, just type ‘?’ with the name of the function. For intance: <code>?inventory</code>.</strong></p>
<p>Using <a href="https://atmoschem.github.io/vein/reference/inventory.html">inventory</a> <strong>Inventory will experience some changes, please be patient and check <a href="https://github.com/atmoschem/vein/projects/3" class="uri">https://github.com/atmoschem/vein/projects/3</a></strong> Please, read the examples in the documentation of each function and run the demo.</p>
<p><strong>Brazilian users, just use get_project and run a project read</strong></p>
<div id="1-examples-with-traffic-data" class="section level3">
<h3 class="hasAnchor">
<a href="#1-examples-with-traffic-data" class="anchor"></a>1) Examples with traffic data:</h3>
<ol>
<li>If you know the distribution of the vehicles by age of use , use: <a href="https://atmoschem.github.io/vein/reference/my_age.html">my_age</a>
</li>
<li>If you know the sales of vehicles or better the registry of new vehicles, use <a href="https://atmoschem.github.io/vein/reference/age.html">age</a> to apply a survival function.</li>
<li>If you know the theoretical shape of the circulating fleet and you can use <a href="https://atmoschem.github.io/vein/reference/age_ldv.html">age_ldv</a>, <a href="https://atmoschem.github.io/vein/reference/age_hdv.html">age_hdv</a> or <a href="https://atmoschem.github.io/vein/reference/age_moto.html">age_moto</a>. For instance, you dont know the sales or registry of vehicles, but somehow you know the shape of this curve.</li>
<li>You can use/merge/transform/adapt any of these functions.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"net"</span>)</a>
<a class="sourceLine" id="cb2-2" title="2">PC_E25_<span class="dv">1400</span> &lt;-<span class="st"> </span><span class="kw">age_ldv</span>(<span class="dt">x =</span> net<span class="op">$</span>ldv, <span class="dt">name =</span> <span class="st">"PC_E25_1400"</span>)</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(PC_E25_<span class="dv">1400</span>, <span class="dt">xlab =</span> <span class="st">"age of use"</span>)</a></code></pre></div>
<p><img src="https://atmoschem.github.io/vein/reference/age_ldv-1.png"></p>
<p>If you want to know the vehicles per street and by age of use, just add the net. Age functions now returns ‘sf’ objects if the net argument is present.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">PC_E25_1400net &lt;-<span class="st"> </span><span class="kw">age_ldv</span>(<span class="dt">x =</span> net<span class="op">$</span>ldv, <span class="dt">name =</span> <span class="st">"PC_E25_1400"</span>, <span class="dt">net =</span> net)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(PC_E25_1400net)</a></code></pre></div>
<p><img src="https://atmoschem.github.io/vein/reference/age_ldv-2.png"></p>
<ul>
<li><a href="https://atmoschem.github.io/vein/reference/temp_fact.html">temp_fact</a></li>
<li><a href="https://atmoschem.github.io/vein/reference/netspeed.html">netspeed</a></li>
</ul>
<p>temporal factors and netspeed</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"net"</span>)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"pc_profile"</span>)</a>
<a class="sourceLine" id="cb4-3" title="3">pc_week &lt;-<span class="st"> </span><span class="kw">temp_fact</span>(net<span class="op">$</span>ldv<span class="op">+</span>net<span class="op">$</span>hdv, pc_profile)</a>
<a class="sourceLine" id="cb4-4" title="4">dfspeed &lt;-<span class="st"> </span><span class="kw">netspeed</span>(pc_week, net<span class="op">$</span>ps, net<span class="op">$</span>ffs, net<span class="op">$</span>capacity, net<span class="op">$</span>lkm, <span class="dt">alpha =</span> <span class="fl">1.5</span>)</a>
<a class="sourceLine" id="cb4-5" title="5"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(dfspeed)</a></code></pre></div>
<p><img src="https://atmoschem.github.io/vein/reference/netspeed-1.png"></p>
<p>If you want ot check the speed at different hours by street, just add net:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">dfspeednet &lt;-<span class="st"> </span><span class="kw">netspeed</span>(pc_week, net<span class="op">$</span>ps, net<span class="op">$</span>ffs, net<span class="op">$</span>capacity, net<span class="op">$</span>lkm,</a>
<a class="sourceLine" id="cb5-2" title="2">                       <span class="dt">alpha =</span> <span class="fl">1.5</span>, <span class="dt">net =</span> net)</a>
<a class="sourceLine" id="cb5-3" title="3">sp<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sp/man/spplot.html">spplot</a></span>(<span class="kw">as</span>(dfspeednet, <span class="st">"Spatial"</span>),</a>
<a class="sourceLine" id="cb5-4" title="4">       <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"S1"</span>, <span class="st">"S9"</span>), <span class="dt">scales =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">Draw =</span> T),</a>
<a class="sourceLine" id="cb5-5" title="5">       <span class="dt">col.regions =</span> <span class="kw"><a href="https://rdrr.io/r/base/rev.html">rev</a></span>(cptcity<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/cptcity/man/cpt.html">cpt</a></span>()))</a></code></pre></div>
<p><img src="https://i.imgur.com/qJUdMea.png"></p>
</div>
<div id="2-emission-factors" class="section level3">
<h3 class="hasAnchor">
<a href="#2-emission-factors" class="anchor"></a>2) Emission Factors</h3>
<ul>
<li><a href="https://atmoschem.github.io/vein/reference/ef_ldv_speed.html">ef_ldv_speed</a></li>
<li><a href="https://atmoschem.github.io/vein/reference/ef_hdv_speed.html">ef_hdv_speed</a></li>
<li><a href="https://atmoschem.github.io/vein/reference/ef_ldv_scaled.html">ef_ldv_scaled</a></li>
<li><a href="https://atmoschem.github.io/vein/reference/ef_hdv_scaled.html">ef_hdv_scaled</a></li>
<li><a href="https://atmoschem.github.io/vein/reference/EmissionFactors.html">EmissionFactors</a></li>
<li><a href="https://atmoschem.github.io/vein/reference/EmissionFactorsList.html">EmissionFactorsList</a></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">V &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">150</span></a>
<a class="sourceLine" id="cb6-2" title="2">ef1 &lt;-<span class="st"> </span><span class="kw">ef_ldv_speed</span>(<span class="dt">v =</span> <span class="st">"PC"</span>,<span class="dt">t =</span> <span class="st">"4S"</span>, <span class="dt">cc =</span> <span class="st">"&lt;=1400"</span>, <span class="dt">f =</span> <span class="st">"G"</span>, <span class="dt">eu =</span> <span class="st">"PRE"</span>,</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="dt">p =</span> <span class="st">"CO"</span>)</a>
<a class="sourceLine" id="cb6-4" title="4">efs &lt;-<span class="st"> </span><span class="kw">EmissionFactors</span>(<span class="kw">ef1</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">150</span>))</a>
<a class="sourceLine" id="cb6-5" title="5"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="kw">Speed</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">150</span>), efs, <span class="dt">xlab =</span> <span class="st">"speed[km/h]"</span>, <span class="dt">type =</span> <span class="st">"b"</span>, <span class="dt">pch =</span> <span class="dv">16</span>)</a></code></pre></div>
<p><img src="https://atmoschem.github.io/vein/reference/ef_ldv_speed-1.png"></p>
</div>
<div id="3-estimation-of-emissions" class="section level3">
<h3 class="hasAnchor">
<a href="#3-estimation-of-emissions" class="anchor"></a>3) Estimation of emissions</h3>
<ul>
<li><a href="https://atmoschem.github.io/vein/reference/emis.html">emis</a></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">euro &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"V"</span>, <span class="dv">5</span>), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"IV"</span>, <span class="dv">5</span>), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"III"</span>, <span class="dv">5</span>), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"II"</span>, <span class="dv">5</span>),</a>
<a class="sourceLine" id="cb7-2" title="2">          <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"I"</span>, <span class="dv">5</span>), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"PRE"</span>, <span class="dv">15</span>))</a>
<a class="sourceLine" id="cb7-3" title="3">lef &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">40</span>, <span class="cf">function</span>(i) {</a>
<a class="sourceLine" id="cb7-4" title="4"><span class="kw">ef_ldv_speed</span>(<span class="dt">v =</span> <span class="st">"PC"</span>, <span class="dt">t =</span> <span class="st">"4S"</span>, <span class="dt">cc =</span> <span class="st">"&lt;=1400"</span>, <span class="dt">f =</span> <span class="st">"G"</span>,</a>
<a class="sourceLine" id="cb7-5" title="5">          <span class="dt">eu =</span> euro[i], <span class="dt">p =</span> <span class="st">"CO"</span>, <span class="dt">show.equation =</span> <span class="ot">FALSE</span>) })</a>
<a class="sourceLine" id="cb7-6" title="6">E_CO &lt;-<span class="st"> </span><span class="kw">emis</span>(<span class="dt">veh =</span> PC_E25_<span class="dv">1400</span>, <span class="dt">lkm =</span> net<span class="op">$</span>lkm, <span class="dt">ef =</span> lef, <span class="dt">speed =</span> dfspeed,</a>
<a class="sourceLine" id="cb7-7" title="7">             <span class="dt">profile =</span> pc_profile)</a></code></pre></div>
</div>
<div id="4-post-emissions" class="section level3">
<h3 class="hasAnchor">
<a href="#4-post-emissions" class="anchor"></a>4) Post Emissions</h3>
<ul>
<li><a href="https://atmoschem.github.io/vein/reference/emis_post.html">emis_post</a></li>
<li>When the argument by = “veh” the emissions are aggregated by age and hour.</li>
<li>When the argument by = “streets_wide”, aggregated the emissions by street. In this cae, if you add the argument net with the respective streets, it returns an spatial net with the hourly emissions.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">E_CO_DF &lt;-<span class="st"> </span><span class="kw">emis_post</span>(<span class="dt">arra =</span> E_CO,  <span class="dt">veh =</span> <span class="st">"PC"</span>, <span class="dt">size =</span> <span class="st">"&lt;1400"</span>, <span class="dt">fuel =</span> <span class="st">"G"</span>,</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="dt">pollutant =</span> <span class="st">"CO"</span>, <span class="dt">by =</span> <span class="st">"veh"</span>)</a>
<a class="sourceLine" id="cb8-3" title="3">E_CO_STREETS &lt;-<span class="st"> </span><span class="kw">emis_post</span>(<span class="dt">arra =</span> E_CO, <span class="dt">pollutant =</span> <span class="st">"CO"</span>, <span class="dt">by =</span> <span class="st">"streets"</span>)</a></code></pre></div>
<div id="grids" class="section level4">
<h4 class="hasAnchor">
<a href="#grids" class="anchor"></a>Grids</h4>
<ul>
<li>
<a href="https://atmoschem.github.io/vein/reference/make_grid.html">make_grid</a>.</li>
</ul>
<p>1) Create a grid using <code>make_grid</code>.The spobj is the spatial net. The size of the grid has the size of the net. You have to specify the grid spacing. 2) Create a grid using a path to wrfinput file instead a net. The grid will have the size of the wrf_input. You don’t have to specify the grid spacing.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(net)</a>
<a class="sourceLine" id="cb9-2" title="2">E_CO_STREETSnet &lt;-<span class="st"> </span><span class="kw">emis_post</span>(<span class="dt">arra =</span> E_CO, <span class="dt">pollutant =</span> <span class="st">"CO"</span>, <span class="dt">by =</span> <span class="st">"streets_wide"</span>,</a>
<a class="sourceLine" id="cb9-3" title="3">                             <span class="dt">net =</span> net)</a>
<a class="sourceLine" id="cb9-4" title="4">g &lt;-<span class="st"> </span><span class="kw">make_grid</span>(net, <span class="dv">1</span><span class="op">/</span><span class="fl">102.47</span>)</a>
<a class="sourceLine" id="cb9-5" title="5">E_CO_g &lt;-<span class="st"> </span><span class="kw">emis_grid</span>(<span class="dt">spobj =</span> E_CO_STREETSnet, <span class="dt">g =</span> g, <span class="dt">sr=</span> <span class="dv">31983</span>)</a>
<a class="sourceLine" id="cb9-6" title="6">na &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"V"</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">168</span>)</a>
<a class="sourceLine" id="cb9-7" title="7"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">168</span>) E_CO_g[[na[i]]] &lt;-<span class="st"> </span>E_CO_g[[na[i]]] <span class="op">*</span><span class="st"> </span>units<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/units/man/set_units.html">set_units</a></span>(<span class="dv">1</span>, <span class="st">"1/h"</span>)</a>
<a class="sourceLine" id="cb9-8" title="8"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(E_CO_g[<span class="st">"V9"</span>], <span class="dt">axes =</span> T, <span class="dt">pal =</span> cptcity<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/cptcity/man/cpt.html">cpt</a></span>(<span class="dt">colorRampPalette =</span> T, <span class="dt">rev =</span> T))</a></code></pre></div>
<p><img src="https://i.imgur.com/Ydsvt8x.png"></p>
</div>
</div>
<div id="creating-a-wrfchem-input-file-using-eixport" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-wrfchem-input-file-using-eixport" class="anchor"></a>Creating a WRFChem Input file using <a href="https://atmoschem.github.io/eixport/">eixport</a>:</h3>
<ol>
<li>Create a grid using <a href="https://atmoschem.github.io/vein/reference/make_grid.html">make_grid</a> and a wrfinput file</li>
<li>Run <a href="https://atmoschem.github.io/vein/reference/emis_grid.html">emis_grid</a> to grid your emissions.</li>
<li>Create a <a href="https://atmoschem.github.io/vein/reference/GriddedEmissionsArray.html">GriddedEmissionsArray</a>.</li>
<li>Create a wrfchem input file [eixport::wrf_create](<a href="https://atmoschem.github.io/eixport/reference/wrf_create.html" class="uri">https://atmoschem.github.io/eixport/reference/wrf_create.html</a>.</li>
<li>Put the <a href="https://atmoschem.github.io/vein/reference/GriddedEmissionsArray.html">GriddedEmissionsArray</a> into the wrf chem input file using <a href="https://atmoschem.github.io/eixport/reference/wrf_put.html">eixport::wrf_put</a>.</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(eixport)</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"EMISS"</span>))</a>
<a class="sourceLine" id="cb10-3" title="3"><span class="kw"><a href="https://rdrr.io/pkg/eixport/man/wrf_create.html">wrf_create</a></span>(<span class="dt">wrfinput_dir         =</span> <span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="dt">package =</span> <span class="st">"eixport"</span>),</a>
<a class="sourceLine" id="cb10-4" title="4">           <span class="dt">wrfchemi_dir         =</span> <span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"EMISS"</span>),</a>
<a class="sourceLine" id="cb10-5" title="5">           <span class="dt">domains              =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb10-6" title="6">           <span class="dt">frames_per_auxinput5 =</span> <span class="dv">1</span>, <span class="co">#hours</span></a>
<a class="sourceLine" id="cb10-7" title="7">           <span class="dt">auxinput5_interval_m =</span> <span class="dv">60</span>,</a>
<a class="sourceLine" id="cb10-8" title="8">           <span class="dt">verbose              =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb10-9" title="9">path_to_wrfi &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="dt">package =</span> <span class="st">"eixport"</span>), <span class="st">"/wrfinput_d02"</span>)</a>
<a class="sourceLine" id="cb10-10" title="10">path_to_wrfc &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"EMISS"</span>), <span class="dt">full.names =</span> <span class="ot">TRUE</span>)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb10-11" title="11">gwrf &lt;-<span class="st"> </span>eixport<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/eixport/man/wrf_grid.html">wrf_grid</a></span>(path_to_wrfi)</a>
<a class="sourceLine" id="cb10-12" title="12">E_CO_gwrf &lt;-<span class="st"> </span><span class="kw">emis_grid</span>(<span class="dt">spobj =</span> E_CO_STREETSnet, <span class="dt">g =</span> gwrf)</a>
<a class="sourceLine" id="cb10-13" title="13">gr &lt;-<span class="st"> </span><span class="kw">GriddedEmissionsArray</span>(E_CO_gwrf, <span class="dt">rows =</span> <span class="dv">51</span>, <span class="dt">cols =</span> <span class="dv">63</span>, <span class="dt">times =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb10-14" title="14">eixport<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/eixport/man/wrf_put.html">wrf_put</a></span>(<span class="dt">file =</span> path_to_wrfc, <span class="dt">name =</span> <span class="st">"E_CO"</span>, <span class="dt">POL =</span> gr)</a></code></pre></div>
</div>
<div id="creating-a-wrfchem-input-file-using-as4wrf" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-wrfchem-input-file-using-as4wrf" class="anchor"></a>Creating a WRFChem Input file using AS4WRF</h3>
<ol>
<li>Create a grid using <a href="https://atmoschem.github.io/vein/reference/make_grid.html">make_grid</a> and your net.</li>
<li>Run <a href="https://atmoschem.github.io/vein/reference/emis_grid.html">emis_grid</a> to grid your emissions.</li>
<li>Run <a href="https://atmoschem.github.io/eixport/reference/to_as4wrf.html">eixport::to_as4wrf</a> to create a data.frame the specifications for AS4WRF.ncl.</li>
<li>Export data.frame to a text.file. Recall that AS4WRF requires all the lumped species.</li>
<li>Contact the developer of AS4WRF Angel Vara <a href="mailto:alvv1986@gmail.com" class="email">alvv1986@gmail.com</a> to get a copy and run AS4WRF.ncl.</li>
</ol>
<p>Thanks and enjoy VEIN!</p>
</div>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>If you use VEIN, please, cite it (<a href="https://www.geosci-model-dev.net/11/2209/2018/gmd-11-2209-2018.bib">BIBTEX</a>, <a href="https://www.geosci-model-dev.net/11/2209/2018/gmd-11-2209-2018.ris">ENDNOTE</a>):</p>
<p>Ibarra-Espinosa, S., Ynoue, R., O’Sullivan, S., Pebesma, E., Andrade, M. D. F., and Osses, M.: VEIN v0.2.2: an R package for bottom-up vehicular emissions inventories, Geosci. Model Dev., 11, 2209-2229, <a href="https://doi.org/10.5194/gmd-11-2209-2018" class="uri">https://doi.org/10.5194/gmd-11-2209-2018</a>, 2018.</p>
<pre><code>@article{gmd-11-2209-2018,
author = {Ibarra-Espinosa, S. and Ynoue, R. and O'Sullivan, S. and Pebesma, E. and Andrade, M. D. F. and Osses, M.},
title = {VEIN v0.2.2: an R package for bottom--up vehicular emissions inventories},
journal = {Geoscientific Model Development},
volume = {11},
year = {2018},
number = {6},
pages = {2209--2229},
url = {https://www.geosci-model-dev.net/11/2209/2018/},
doi = {10.5194/gmd-11-2209-2018}
}</code></pre>
</div>
<div id="communications-doubts-etc" class="section level2">
<h2 class="hasAnchor">
<a href="#communications-doubts-etc" class="anchor"></a>Communications, doubts etc</h2>
<ul>
<li>Drop me an email <a href="mailto:sergio.ibarra@usp.br" class="email">sergio.ibarra@usp.br</a> or <a href="mailto:zergioibarra@hotmail.com" class="email">zergioibarra@hotmail.com</a> (你好中国朋友 - Hello Chinese friends!)</li>
<li>Check the group on GoogleGroups <a href="https://groups.google.com/d/forum/veinmodel">Group</a>.</li>
<li>Check the project on <a href="https://www.researchgate.net/project/VEIN-An-R-package-for-vehicular-emissions-inventories">ResearchGate</a>.</li>
</ul>
</div>
<div id="issues" class="section level2">
<h2 class="hasAnchor">
<a href="#issues" class="anchor"></a>Issues</h2>
<p>If you encounter any issues while using VEIN, please submit your issues to: <a href="https://github.com/atmoschem/vein/issues/" class="uri">https://github.com/atmoschem/vein/issues/</a> If you have any suggestions just let me know to <a href="mailto:sergio.ibarra@usp.br" class="email">sergio.ibarra@usp.br</a>.</p>
<div id="contributing" class="section level3">
<h3 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h3>
<p>Please, read <a href="https://github.com/atmoschem/vein/blob/master/CONTRIBUTING.md">this</a> guide. Contributions of all sorts are welcome, issues and pull requests are the preferred ways of sharing them. When contributing pull requests, please follow the <a href="https://google.github.io/styleguide/Rguide.xml">Google’s R Style Guide</a>. This project is released with a <a href="https://github.com/atmoschem/vein/blob/master/CODE_OF_CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div id="note-for-non-english-and-anaconda-users" class="section level3">
<h3 class="hasAnchor">
<a href="#note-for-non-english-and-anaconda-users" class="anchor"></a>Note for non-english and anaconda users</h3>
<p>Sometimes you need to install R and all dependencies and a way for doing that is using anaconda. Well, as my system is in portuguese, after installing R using anaconda it changed the decimal character to ‘,’. In order to change it back to english meaning decimal separator as ‘.’, I added this variable into the .bashrc</p>
<pre><code>nano ~/.bashrc
export Lang=C</code></pre>
<p>More details on <a href="https://stackoverflow.com/questions/13575180/how-to-change-language-settings-in-r">StackOverflow</a></p>
<p>You can learn more about VEIN reading the documentation in <a href="https://cran.r-project.org/web/packages/vein/vein.pdf">PDF</a>, <a href="https://atmoschem.github.io/vein/">online</a>, reading the book <a href="https://ibarraespinosa.github.io/VEINBOOK/">online</a>, or buy it in <a href="https://www.amazon.com/VEINBOOK-Estimating-vehicular-emissions-package-ebook-dp-B07L7XRFKC/dp/B07L7XRFKC/ref=mt_kindle?_encoding=UTF8&amp;me=&amp;qid=">Kindle</a> or <a href="https://www.amazon.com/gp/product/1791571158?pf_rd_p=1581d9f4-062f-453c-b69e-0f3e00ba2652&amp;pf_rd_r=EMDPZM3G7BWCHAD9F4QP">Paperback</a></p>
<p><img src="https://i.imgur.com/RcfNmDm.jpg"></p>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="https://gitlab.com/ibarraespinosa/emepeea/-/issues">https://​gitlab.com/​ibarraespinosa/​emepeea/​-/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing emep</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sergio Ibarra-Espinosa <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3162-1905" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Sergio Ibarra-Espinosa.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
